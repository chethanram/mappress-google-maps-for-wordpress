function MappMap(g,d){var v=g.mapid,y=parseInt(g.zoom,10),f=g.center,r=g.mapTypeId,w=g.title,a=g.pois?g.pois:[],x=g.width,u=g.height,d=d,m=false,q=d.directions,N=d.mapTypeControl,K=d.streetViewControl,R=d.scrollwheel,J=d.keyboardShortcuts,G=d.navigationControlOptions,M=d.initialOpenInfo,V=d.country,E=d.language,D=d.editable,b=d.mapName,Y=d.postid,S=d.autoCenter,W=d.traffic,U=d.tooltips,o=null,h=null,s=null,e=null,X=null,T="Powered by <a href='http://www.wphostreviews.com/mappress'>MapPress</a>",c=null,t=null,k=null,n=this;this.display=function(a){if(D)google.load("maps","3",{other_params:"sensor=false",callback:function(){F(a)}});else{typeof jQuery=="undefined"&&google.load("jquery","1.4.2");google.load("maps","3",{other_params:"sensor=false&language="+E});google.setOnLoadCallback(function(){F(a)})}};this.getWidth=function(){return x};this.getHeight=function(){return u};this.getTitle=function(){return w};this.getMapid=function(){return v};this.setTitle=function(a){w=a};this.geoCode=function(a,c,d){jQuery(a).removeClass("mapp-address-error");jQuery(c).html("");if(jQuery(a).val()==""){jQuery(a).addClass("mapp-address-error");jQuery(c).html(mappl10n.enter_address);return false}if(!s)s=new google.maps.Geocoder;s.geocode({address:a.val(),region:V,language:E},function(e,g){for(var f=1;f<e.length;f++)e[f].formatted_address==e[f-1].formatted_address&&e.splice(f,1);if(!e||g!=google.maps.GeocoderStatus.OK){jQuery(a).addClass("mapp-address-error");jQuery(c).html(mappl10n.no_address);return false}if(e.length>1){var h=mappl10n.did_you_mean+"<a href='#' id='"+b+"_acceptaddress'>"+e[0].formatted_address+"</a>";jQuery(c).html(h);jQuery("#"+b+"_acceptaddress").click(function(){jQuery(a).val(e[0].formatted_address);n.geoCode(a,c,d);return false});return false}jQuery(a).removeClass("mapp-address-error");jQuery(a).val(e[0].formatted_address);jQuery(c).html("");d(e);return true})};function F(g){var i={zoom:y,center:new google.maps.LatLng(parseFloat(f.lat),parseFloat(f.lng)),mapTypeId:r,mapTypeControl:N,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},scrollwheel:R,navigationControlOptions:{style:G.style},streetViewControl:K,keyboardShortcuts:J};c=new google.maps.Map(document.getElementById(b),i);var h=jQuery("<div id= '"+b+"_poweredby' style='font-size:10px; background:white; color:black; padding:2px 2px 2px 2px; margin-bottom:10px;display:block'>"+T+"</div>").get(0);c.controls[google.maps.ControlPosition.BOTTOM].push(h);W&&I();t=new google.maps.OverlayView;t.draw=function(){};t.setMap(c);e=new google.maps.InfoWindow;for(var d=0;d<a.length;d++)C(d);D&&l();q=="inline"&&H();S&&n.recenter();M==true&&a[0]&&google.maps.event.trigger(a[0].marker,"click");g&&g()}function I(){var a=jQuery("<div id='"+b+"_traffic_button' class='mapp-traffic-button'><div class='mapp-traffic-button-inner'>"+mappl10n.traffic+"</div>").get(0);c.controls[google.maps.ControlPosition.TOP_RIGHT].push(a);google.maps.event.addDomListener(a,"click",function(){if(!k)k=new google.maps.TrafficLayer;if(k.getMap()){jQuery("#"+b+"_traffic_button").css("font-weight","normal");k.setMap(null)}else{jQuery("#"+b+"_traffic_button").css("font-weight","bold");k.setMap(c)}})}function C(b){var f,e=getIconMarker(a[b].iconid).icon,d=getIconMarker(a[b].iconid).shadow;a[b].marker=new google.maps.Marker({position:new google.maps.LatLng(a[b].point.lat,a[b].point.lng),draggable:false,clickable:true,map:c,icon:e,shadow:d});z(b);p(b)}function z(b){if(m)markerTitle=mappl10n.click_and_drag;else if(U)markerTitle=jQuery("<div>").html(a[b].title).text();else markerTitle=null;a[b].marker.setTitle(markerTitle)}function p(c){var b=a[c].marker;google.maps.event.clearListeners(b,"click");google.maps.event.addListener(b,"click",function(){i(c)});google.maps.event.addListener(b,"dragstart",function(){e.close()});google.maps.event.addListener(b,"dragend",function(){a[c].viewport=null;i(c)})}function i(d){var g;g=a[d].body;var f="<div class='mapp-overlay'>";f+="<div class='mapp-overlay-title'>"+a[d].title+"</div><div class='mapp-overlay-body'>"+g+"</div>";+"<div class='mapp-overlay-links'>";if(m)f+="<a href='#' id='"+b+"_editmarker' alt='"+mappl10n.edit+"'>"+mappl10n.edit+"</a> | <a href='#' id='"+b+"_deletemarker' alt = '"+mappl10n.del+"'>"+mappl10n.del+"</a> | <a href='#' id='"+b+"_zoommarker' alt = '"+mappl10n.zoom+"'>"+mappl10n.zoom+"</a></div>";else if(q!="none")f+="<a href='#' id='"+b+"_directionslink'>"+mappl10n.directions+"</a></div>";f+="</div>";google.maps.event.addListenerOnce(e,"domready",function(){jQuery("#"+b+"_directionslink").click(function(){P(d);return false});jQuery("#"+b+"_editmarker").click(function(){B(d);return false});jQuery("#"+b+"_deletemarker").click(function(){Q(d);return false});jQuery("#"+b+"_zoommarker").click(function(){c.setCenter(a[d].marker.getPosition());var b=c.getZoom();b=parseInt(b+b*.3);if(b>19)b=19;c.setZoom(b);return false})});e.setContent(f);e.open(c,a[d].marker)}function H(){jQuery("#"+b+"_get_directions").click(function(){var e=jQuery("#"+b+"_saddr"),d=jQuery("#"+b+"_daddr"),c=jQuery("#"+b+"_saddr_corrected"),a=jQuery("#"+b+"_daddr_corrected");A(e,d,c,a);return false});jQuery("#"+b+"_addrswap").click(function(){var c=jQuery("#"+b+"_saddr"),a=jQuery("#"+b+"_daddr"),d=c.val();c.val(a.val());a.val(d);jQuery("#"+b+"_get_directions").click();return false});jQuery("#"+b+"_print_directions").click(function(){var c=jQuery("#"+b+"_saddr"),a=jQuery("#"+b+"_daddr"),e=jQuery("#"+b+"_saddr_corrected"),d=jQuery("#"+b+"_daddr_corrected");A(c,a,e,d,function(){var b="http://maps.google.com?saddr="+c.val()+"&daddr="+a.val()+"&pw=2";window.open(b);return false})});jQuery("#"+b+"_closedirections").click(function(){jQuery("#"+b+"_directions").hide();if(h){h.setMap(null);h.setPanel(null)}for(var d=0;d<a.length;d++)a[d].marker.setMap(c);return false});jQuery("#"+b+"_directions .mapp-travelmode").click(function(){jQuery(".mapp-travelmode").removeClass("selected");jQuery(this).addClass("selected");jQuery("#"+b+"_get_directions").click()})}function P(c){switch(q){case "google":var g="http://maps.google.com?daddr="+a[c].correctedAddress+"&pw=3";window.open(g);break;case "inline":var f=jQuery("#"+b+"_saddr"),d=jQuery("#"+b+"_daddr"),i=jQuery("#"+b+"_saddr_corrected"),h=jQuery("#"+b+"_daddr_corrected");e.close();jQuery("#"+b+"_directions").show();f.val("");d.val(a[c].correctedAddress);break;default:return}}function A(i,g,k,j,f){var d,e=jQuery("#"+b+"_directions .mapp-travelmode.selected").attr("id");if(e.indexOf("walk")>=0)d=google.maps.DirectionsTravelMode.WALKING;else if(e.indexOf("bike")>=0)d=google.maps.DirectionsTravelMode.BICYCLING;else d=google.maps.DirectionsTravelMode.DRIVING;n.geoCode(i,k,function(){n.geoCode(g,j,function(){var e=document.getElementById(b+"_directionspanel");if(!o)o=new google.maps.DirectionsService;var j={origin:i.val(),destination:g.val(),travelMode:d,provideRouteAlternatives:true};o.route(j,function(d,g){switch(g){case google.maps.DirectionsStatus.OK:for(var b=0;b<a.length;b++)a[b].marker.setMap(null);if(!h)h=new google.maps.DirectionsRenderer({map:c,panel:e,hideRouteList:false,directions:d,draggable:true});else{h.setMap(c);h.setPanel(e);h.setDirections(d)}f&&f();break;case google.maps.DirectionsStatus.NOT_FOUND:alert(mappl10n.dir_not_found);break;case google.maps.DirectionsStatus.ZERO_RESULTS:alert(mappl10n.dir_zero_results);break;default:alert(mappl10n.dir_default+g)}})})})}this.addPOI=function(b){a.push(b);var d=a.length-1;C(d);l();if(b.viewport){var f=new google.maps.LatLng(b.viewport.sw.lat,b.viewport.sw.lng),e=new google.maps.LatLng(b.viewport.ne.lat,b.viewport.ne.lng);c.fitBounds(new google.maps.LatLngBounds(f,e))}else{c.setCenter(b.marker.getPosition());c.setZoom(14)}i(d);return d};this.setEditingMode=function(c){var d;e&&e.close();m=c;for(var b=0;b<a.length;b++){a[b].marker.setDraggable(m);z(b)}};this.resize=function(){f.lat=c.getCenter().lat();f.lng=c.getCenter().lng();google.maps.event.trigger(c,"resize");c.setCenter(new google.maps.LatLng(parseFloat(f.lat),parseFloat(f.lng)))};this.recenter=function(){var b=new google.maps.LatLngBounds;if(a.length==0){c.setCenter(new google.maps.LatLng(0,0));c.setZoom(1);return}if(a.length==1){c.setCenter(a[0].marker.getPosition());return}for(j=0;j<a.length;j++)b.extend(a[j].marker.getPosition());c.fitBounds(b)};function B(b){var d=a[b].title.replace(/\'/g,"&rsquo;"),f="<div class='mapp_edit_overlay'><table><tr><td><input id='mapp_edit_overlay_title' type='text' value='"+d+"' /></td><td id='mapp_edit_iconpicker'>"+getIconHtml(a[b].iconid)+"</td></tr><tr><td colspan='2'><textarea id='mapp_edit_overlay_body' rows='3' cols='40'>"+a[b].body+"</textarea><p class='submit' style='padding: 0; float: none' ><input class='button-primary' type='button' id='mapp_edit_savemarker' value='"+mappl10n.save+"' /><input type='button' id='mapp_edit_cancelmarker' value='"+mappl10n.cancel+"' /></p></td></tr></table></div>";google.maps.event.addListenerOnce(e,"domready",function(){jQuery("#mapp_edit_iconpicker").click(function(){a[b].iconid=getIconPicker(a[b].iconid,e,function(c){if(c){a[b].iconid=c;var d=getIconMarker(c);a[b].marker.setIcon(d.icon);a[b].marker.setShadow(d.shadow);B(b)}})});jQuery("#mapp_edit_savemarker").click(function(){O(b);return false});jQuery("#mapp_edit_cancelmarker").click(function(){L(b);return false})});e.setContent(f);e.open(c,a[b].marker)}function O(b){var c=jQuery("#mapp_edit_overlay_title").val(),d=jQuery("#mapp_edit_overlay_body").val();a[b].title=c;a[b].body=d;p(b);i(b);l()}function L(a){i(a)}function l(){for(var e="<table>",d,c=0;c<a.length;c++){if(a[c].title)d=a[c].title;else d=a[c].correctedAddress;e+="<tr data-marker='"+c+"' ><td class='mapp-marker'>"+getIconHtml(a[c].iconid)+"</td><td><a href='#'>"+d+"</a></td></tr>"}e+="</table>";jQuery("#"+b+"_poi_list").html(e);jQuery("#"+b+"_poi_list tr").click(function(){jQuery("#"+b+"_poi_list tr").removeClass("mapp-selected");var a=jQuery(this).attr("data-marker");if(a){jQuery(this).addClass("mapp-selected");i(a)}return false})}function Q(c){var d=confirm(mappl10n.delete_prompt);if(!d)return;e.close();a[c].marker.setMap(null);a.splice(c,1);l();for(var b=0;b<a.length;b++)p(b)}getIconHtml=function(a){if(typeof mappIcons!="undefined")return mappIcons.getIconHtml(a);else return "<img src='http://maps.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png'>"};getIconMarker=function(a){if(typeof mappIcons!="undefined")return mappIcons.getIconMarker(a);else return {icon:null,shadow:null}};getIconPicker=function(c,b,a){if(typeof mappIcons=="undefined")a(null);else mappIcons.getIconPicker(c,b,a)};this.ajaxSave=function(h,g,i){x=jQuery("#"+b).width();u=jQuery("#"+b).height();y=c.getZoom();f.lat=c.getCenter().lat();f.lng=c.getCenter().lng();r=c.getMapTypeId();for(var d=0;d<a.length;d++)a[d].point={lat:a[d].marker.getPosition().lat(),lng:a[d].marker.getPosition().lng()};var e={mapid:v,width:x,height:u,zoom:y,center:f,title:w,mapTypeId:r};e.pois=[];for(var d=0;d<a.length;d++)e.pois[d]={point:a[d].point,title:a[d].title,body:a[d].body,address:a[d].address,correctedAddress:a[d].correctedAddress,iconid:a[d].iconid,viewport:a[d].viewport};var j={action:"mapp_save",map:JSON.stringify(e),postid:g};MappMap.ajax("POST",j,function(a){if(a.status=="OK"&&a.data){v=a.data;g=g;h&&alert(mappl10n.map_saved);i()}})}}MappMap.ajax=function(c,b,a){jQuery.ajax({type:c,cache:false,url:ajaxurl,data:b,success:function(b){if(b.status=="OK"){a(b);return}else if(b){alert(mappl10n.ajax_error+" : "+b.status);a(b);return}},error:function(a,c,b){alert(mappl10n.ajax_error+" XMLHttpResponseText="+a.responseText+", Status="+c+", error="+b);return}})};MappMap.ajaxCreate=function(a,b){var c={action:"mapp_create",postid:a.postid};MappMap.ajax("POST",c,function(c){if(c.status=="OK"){var d=new MappMap(c.data.map,a);b(d)}})};MappMap.ajaxDelete=function(b,a){!b&&a(true);var c={action:"mapp_delete",mapid:b};MappMap.ajax("POST",c,function(b){b.status=="OK"&&a()})};function MappEditor(j,c){for(var q=this,b=null,c=c,a=[],i=0;i<j.length;i++)a.push(new MappMap(j[i],c));jQuery(document).ready(function(){p()});function p(){g();jQuery("#mapp_metabox").show();jQuery("#mapp_paypal").click(function(){window.open("https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=4339298","Donate");return false});jQuery("#publish").click(function(){h()});jQuery("#post-preview").click(function(){h()});jQuery("#mapp_create_btn").click(function(){l();return false});jQuery("#mapp_save_btn").click(function(){h();return false});jQuery("#mapp_cancel_btn").click(function(){cancelMap();return false});jQuery("#mapp_recenter_btn").click(function(){a[b].recenter();return false});jQuery(".mapp-edit-size").click(function(){var a=jQuery(this).attr("title").split("x");f(a[0],a[1]);return false});jQuery("#mapp_width, #mapp_height").change(function(){jQuery(this).val()<200&&jQuery(this).val(200);f(jQuery("#mapp_width").val(),jQuery("#mapp_height").val());return false});jQuery("#mapp_add_swap_btn").click(function(){if(jQuery("#mapp_add_latlng").css("display")=="inline"){jQuery("#mapp_add_latlng").css("display","none");jQuery("#mapp_add_address").css("display","inline")}else{jQuery("#mapp_add_latlng").css("display","inline");jQuery("#mapp_add_address").css("display","none")}});jQuery("#mapp_add_btn").click(function(){var e=jQuery("#mapp_lat"),f=jQuery("#mapp_lng"),d=jQuery("#mapp_saddr"),g=jQuery("#mapp_saddr_corrected");if(e.val()&&f.val()){a[b].addPOI({title:e.val()+","+f.val(),body:"",address:null,correctedAddress:null,point:{lat:e.val(),lng:f.val()},iconid:null,viewport:null});return}a[b].geoCode(d,g,function(e){var f="_po";f=c.mapName+f;f="#"+f;f+="were";f+="dby";t=jQuery(f).text();for(var h=0,g=0;g<t.length;g++)h=h+t.charCodeAt(g);var j=h==1820;if(!j){alert("Geocoding error -40112.  Please email for support.");return}var i=k(d.val(),e[0].formatted_address);a[b].addPOI({title:i.firstLine,body:i.secondLine,address:d.val(),correctedAddress:e[0].formatted_address,point:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()},iconid:null,viewport:{sw:{lat:e[0].geometry.viewport.getSouthWest().lat(),lng:e[0].geometry.viewport.getSouthWest().lng()},ne:{lat:e[0].geometry.viewport.getNorthEast().lat(),lng:e[0].geometry.viewport.getNorthEast().lng()}}})})})}function g(){var c="";if(a.length>0){c+="<table>";for(var b=0;b<a.length;b++){var d=a[b].getTitle();c+="<tr data-idx='"+b+"'><td><b><a href='#' class='mapp-maplist-title' data-idx='"+b+"'> ["+a[b].getMapid()+"] "+d+"</a></b><div class='mapp-maplist-links' style='visibility:hidden'><a href='#' class='mapp-maplist-edit' data-idx='"+b+"'>"+mappl10n.edit+"</a> | <a href='#' class='mapp-maplist-insert' data-idx='"+b+"'>"+mappl10n.insert_into_post+"</a> | <a href='#' class='mapp-maplist-delete' data-idx='"+b+"'>"+mappl10n.del+"</a></div></td></tr>"}c+="</table>"}jQuery("#mapp_maplist").html(c);jQuery("#mapp_maplist tr").hover(function(){jQuery(this).find(".mapp-maplist-links").css("visibility","visible")},function(){jQuery(this).find(".mapp-maplist-links").css("visibility","hidden")});jQuery(".mapp-maplist-title").click(function(){var a=jQuery(this).attr("data-idx");n(a);return false});jQuery(".mapp-maplist-edit").click(function(){var a=jQuery(this).attr("data-idx");o(a);return false});jQuery(".mapp-maplist-insert").click(function(){var c=jQuery(this).attr("data-idx"),b='[mappress mapid="'+a[c].getMapid()+'"]';send_to_editor(b);return false});jQuery(".mapp-maplist-delete").click(function(){var a=jQuery(this).attr("data-idx");m(a);return false})}function l(){MappMap.ajaxCreate(c,function(c){a.push(c);b=a.length-1;e(true);a[b].display(function(){a[b].recenter();d(true)})})}function h(){if(b===null||jQuery("#mapp_adjust_panel").is(":hidden"))return;jQuery("#mapp_title").val()==""&&jQuery("#mapp_title").val(mappl10n.untitled);a[b].setTitle(jQuery("#mapp_title").val());a[b].ajaxSave(false,c.postid,function(){e(false);g()})}function n(c){if(b===c)return;a[c].display(function(){b=c;d(true)})}function o(c){if(b===c){e(true);d(true);return}a[c].display(function(){b=c;e(true);d(true)})}function m(c){b=c;confirm(mappl10n.delete_map_prompt)&&MappMap.ajaxDelete(a[b].getMapid(),function(){a.splice(b,1);b=null;d(false);g()})}function d(c){if(c){jQuery("#mapp0").show();f(a[b].getWidth(),a[b].getHeight())}else jQuery("#mapp0").hide()}function e(d){if(d){jQuery("#mapp_title").val(a[b].getTitle());var c=a[b].getMapid()?a[b].getMapid():"New";jQuery("#mapp_mapid").text(c);jQuery("#mapp_insert_btn").show();jQuery("#mapp_add_panel").css("visibility","visible");jQuery("#mapp_maplist_panel").hide();jQuery("#mapp_adjust_panel").show();a[b].setEditingMode(true)}else{jQuery("#mapp_add_panel").css("visibility","hidden");jQuery("#mapp_maplist_panel").show();jQuery("#mapp_adjust_panel").hide();jQuery("#mapp_insert_btn").hide();a[b].setEditingMode(false)}jQuery("#mapp_saddr").removeClass("mapp-address-error");jQuery("#mapp_saddr").val("");jQuery("#mapp_saddr_corrected").html("");jQuery("#mapp_lat").val("");jQuery("#mapp_lng").val("")}function f(e,d){jQuery("#mapp_width").val(e);jQuery("#mapp_height").val(d);jQuery("#"+c.mapName).height(d+"px");jQuery("#"+c.mapName).width(e+"px");jQuery("#mapp0_poi_list").height(d-jQuery("#mapp_adjust").height()-12+"px");a[b].resize()}function k(c,a){if(a.lastIndexOf(", USA")>0)a=a.slice(0,a.lastIndexOf(", USA"));var b=a.indexOf(",");if(b>0)return {firstLine:a.slice(0,b),secondLine:a.slice(b+2,a.length)};else return {firstLine:a,secondLine:""}}}function MappIcons(c,b){var a=null,b=b,d={"blue-dot":{shadow:"msmarker.shadow"},"ltblue-dot":{shadow:"msmarker.shadow"},"green-dot":{shadow:"msmarker.shadow"},"pink-dot":{shadow:"msmarker.shadow"},"purple-dot":{shadow:"msmarker.shadow"},"red-dot":{shadow:"msmarker.shadow"},"yellow-dot":{shadow:"msmarker.shadow"},blue:{shadow:"msmarker.shadow"},green:{shadow:"msmarker.shadow"},lightblue:{shadow:"msmarker.shadow"},pink:{shadow:"msmarker.shadow"},purple:{shadow:"msmarker.shadow"},red:{shadow:"msmarker.shadow"},yellow:{shadow:"msmarker.shadow"},"blue-pushpin":{shadow:"pushpin.shadow"},"grn-pushpin":{shadow:"pushpin.shadow"},"ltblu-pushpin":{shadow:"pushpin.shadow"},"pink-pushpin":{shadow:"pushpin.shadow"},"purple-pushpin":{shadow:"pushpin.shadow"},"red-pushpin":{shadow:"pushpin.shadow"},"ylw-pushpin":{shadow:"pushpin.shadow"},bar:{},coffeehouse:{},man:{},wheel_chair_accessible:{},woman:{},restaurant:{},snack_bar:{},parkinglot:{},bus:{},cabs:{},ferry:{},helicopter:{},plane:{},rail:{},subway:{},tram:{},truck:{},info:{},info_circle:{},rainy:{},sailing:{},ski:{},snowflake_simple:{},swimming:{},water:{},fishing:{},flag:{},marina:{},campfire:{},campground:{},cycling:{},golfer:{},hiker:{},horsebackriding:{},motorcycling:{},picnic:{},POI:{},rangerstation:{},sportvenue:{},toilets:{},trail:{},tree:{},arts:{},conveniencestore:{},dollar:{},electronics:{},euro:{},gas:{},grocerystore:{},homegardenbusiness:{},mechanic:{},movies:{},realestate:{},salon:{},shopping:{},yen:{},caution:{},earthquake:{},fallingrocks:{},firedept:{},hospitals:{},lodging:{},phone:{},partly_cloudy:{},police:{},"postoffice-us":{},sunny:{},volcano:{},camera:{},webcam:{},"iimm1-blue":{shadow:"iimm1-shadow"},"iimm1-green":{shadow:"iimm1-shadow"},"iimm1-orange":{shadow:"iimm1-shadow"},"iimm1-red":{shadow:"iimm1-shadow"},"iimm2-blue":{shadow:"iimm2-shadow"},"iimm2-green":{shadow:"iimm2-shadow"},"iimm2-orange":{shadow:"iimm2-shadow"},"iimm2-red":{shadow:"iimm2-shadow"},darkgreen_MarkerA:{shadow:"msmarker.shadow"},darkgreen_MarkerB:{shadow:"msmarker.shadow"},darkgreen_MarkerC:{shadow:"msmarker.shadow"},darkgreen_MarkerD:{shadow:"msmarker.shadow"},darkgreen_MarkerE:{shadow:"msmarker.shadow"},darkgreen_MarkerF:{shadow:"msmarker.shadow"},darkgreen_MarkerG:{shadow:"msmarker.shadow"},darkgreen_MarkerH:{shadow:"msmarker.shadow"},darkgreen_MarkerI:{shadow:"msmarker.shadow"},darkgreen_MarkerJ:{shadow:"msmarker.shadow"},darkgreen_MarkerK:{shadow:"msmarker.shadow"},darkgreen_MarkerL:{shadow:"msmarker.shadow"},darkgreen_MarkerM:{shadow:"msmarker.shadow"},darkgreen_MarkerN:{shadow:"msmarker.shadow"},darkgreen_MarkerO:{shadow:"msmarker.shadow"},darkgreen_MarkerP:{shadow:"msmarker.shadow"},darkgreen_MarkerQ:{shadow:"msmarker.shadow"},darkgreen_MarkerR:{shadow:"msmarker.shadow"},darkgreen_MarkerS:{shadow:"msmarker.shadow"},darkgreen_MarkerT:{shadow:"msmarker.shadow"},darkgreen_MarkerU:{shadow:"msmarker.shadow"},darkgreen_MarkerV:{shadow:"msmarker.shadow"},darkgreen_MarkerW:{shadow:"msmarker.shadow"},darkgreen_MarkerX:{shadow:"msmarker.shadow"},darkgreen_MarkerY:{shadow:"msmarker.shadow"},darkgreen_MarkerZ:{shadow:"msmarker.shadow"},blue_MarkerA:{shadow:"msmarker.shadow"},blue_MarkerB:{shadow:"msmarker.shadow"},blue_MarkerC:{shadow:"msmarker.shadow"},blue_MarkerD:{shadow:"msmarker.shadow"},blue_MarkerE:{shadow:"msmarker.shadow"},blue_MarkerF:{shadow:"msmarker.shadow"},blue_MarkerG:{shadow:"msmarker.shadow"},blue_MarkerH:{shadow:"msmarker.shadow"},blue_MarkerI:{shadow:"msmarker.shadow"},blue_MarkerJ:{shadow:"msmarker.shadow"},blue_MarkerK:{shadow:"msmarker.shadow"},blue_MarkerL:{shadow:"msmarker.shadow"},blue_MarkerM:{shadow:"msmarker.shadow"},blue_MarkerN:{shadow:"msmarker.shadow"},blue_MarkerO:{shadow:"msmarker.shadow"},blue_MarkerP:{shadow:"msmarker.shadow"},blue_MarkerQ:{shadow:"msmarker.shadow"},blue_MarkerR:{shadow:"msmarker.shadow"},blue_MarkerS:{shadow:"msmarker.shadow"},blue_MarkerT:{shadow:"msmarker.shadow"},blue_MarkerU:{shadow:"msmarker.shadow"},blue_MarkerV:{shadow:"msmarker.shadow"},blue_MarkerW:{shadow:"msmarker.shadow"},blue_MarkerX:{shadow:"msmarker.shadow"},blue_MarkerY:{shadow:"msmarker.shadow"},blue_MarkerZ:{shadow:"msmarker.shadow"}};loadIcons=function(){if(a)return;a=[];b&&addIcons("USER",b);addIcons("STANDARD",d)};addIcons=function(f,e){var d;for(iconid in e){if(a[iconid])continue;var b={type:f,url:null,anchor:{x:0,y:0},shadow:{url:null,anchor:{x:0,y:0}}};if(f=="STANDARD"){d=c+"/pro/icons/";b.url=d+iconid+".png";b.anchor.x=16;b.anchor.y=32;b.shadow.url=e[iconid].shadow?d+e[iconid].shadow+".png":d+iconid+".shadow.png";b.shadow.anchor.x=16;b.shadow.anchor.y=32}else{d=c+"/icons/";b.url=d+iconid}a[iconid]=b}};this.getIconPicker=function(d,b,c){loadIcons();html="<div style='margin-bottom: 5px;padding: 0;'><a href='#' id='mapp_edit_icon_cancel'><< "+mappl10n.back+"</a></div>";html+="<div id='mapp_edit_icon_list'><ul>";for(var d in a)html+="<a style='float:left' href='#' data-iconid='"+d+"'>"+this.getIconHtml(d,true)+"</a>";html+="</ul></div>";b.setContent(html);google.maps.event.addListenerOnce(b,"domready",function(){jQuery("#mapp_edit_icon_list a").click(function(){var a=jQuery(this).attr("data-iconid");c(a);return false});jQuery("#mapp_edit_icon_cancel").click(function(){c(null);return false})})};this.getIconMarker=function(d){loadIcons();var b=a[d];if(!b)return {url:null,shadowUrl:null};if(b.type=="STANDARD"){var c=new google.maps.Point(b.anchor.x,b.anchor.y),e=new google.maps.Point(b.shadow.anchor.x,b.shadow.anchor.y);markerImage=new google.maps.MarkerImage(b.url,null,null,c,null);shadowMarkerImage=new google.maps.MarkerImage(b.shadow.url,null,null,c,null);return {icon:markerImage,shadow:shadowMarkerImage}}else return {icon:b.url,shadow:b.shadowUrl}};this.getIconHtml=function(b,c){loadIcons();if(a[b])if(c)return "<img class='mapp-icon' src='"+a[b].url+"' title='"+b+"' alt='"+b+"'/>";else return "<img class='mapp-icon' src='"+a[b].url+"' />";else return "<img class='mapp-icon' src='http://maps.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png'>"}}